{"openapi":"3.1.0","info":{"title":"Trading Simulator API","description":"\n A stateless execution engine designed to simulate the execution of trading orders\n against historical market data. The simulator focuses on deterministic execution\n and evaluation of submitted orders without performing signal generation or strategy logic.\n\n ## Features\n\n * Historical OHLCV-based simulation\n * Support for daily and intraday intervals (1m to 4h)\n * Market and limit order types\n * Bracket orders with stop loss and take profit\n * Comprehensive performance metrics\n * Multiple orders per simulation request\n\n ## Usage\n\n Submit trading orders via the `/api/v1/simulate` endpoint and receive detailed\n execution results including individual trade outcomes and performance metrics.\n ","contact":{"name":"Trading Simulator API","url":"https://github.com/your-repo/trading-simulator"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"paths":{"/api/v1/simulate":{"post":{"tags":["simulation"],"summary":"Execute Trading Simulation","description":"Execute a trading simulation against historical market data.\n \n This endpoint accepts a list of trading orders and simulates their execution\n against historical OHLCV data for the specified symbol and timeframe.\n \n The simulation uses deterministic fill logic:\n - Market orders are filled at the open price of the entry time bar\n - Limit orders are filled when price touches the entry price during or after entry time\n - Stop loss and take profit levels are evaluated in candle order (first touch wins)\n - Orders that don't meet entry conditions within the simulation window are discarded\n \n Returns detailed execution results including individual trade outcomes and\n performance metrics such as win rate, total PnL, and maximum drawdown.","operationId":"simulate_trading_api_v1_simulate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulationRequest"}}},"required":true},"responses":{"200":{"description":"Simulation completed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulationResponse"}}}},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/health":{"get":{"tags":["simulation"],"summary":"Health Check","description":"Check if the simulation service is healthy and ready to accept requests.","operationId":"health_check_api_v1_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Health Check Api V1 Health Get"}}}}}}},"/":{"get":{"tags":["root"],"summary":"Read Root","description":"Root endpoint providing basic API information.\n\nReturns:\n dict: Basic API information","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Read Root Get"}}}}}}}},"components":{"schemas":{"ErrorResponse":{"properties":{"error":{"type":"string","title":"Error","description":"Error type or category"},"message":{"type":"string","title":"Message","description":"Detailed error message"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details","description":"Additional error details"}},"type":"object","required":["error","message"],"title":"ErrorResponse","description":"Error response model for API errors."},"Order":{"properties":{"entry_time":{"type":"string","format":"date-time","title":"Entry Time","description":"ISO 8601 timestamp when the order should be entered"},"entry_type":{"$ref":"#/components/schemas/OrderType","description":"Order type: MKT (market) or LMT (limit)"},"entry_price":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Entry Price","description":"Entry price for limit orders (ignored for market orders)"},"side":{"$ref":"#/components/schemas/OrderSide","description":"Order side: buy or sell"},"stop_loss":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Stop Loss","description":"Stop loss price level"},"take_profit":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Take Profit","description":"Take profit price level"}},"type":"object","required":["entry_time","entry_type","side"],"title":"Order","description":"Individual order model representing a trading instruction."},"OrderSide":{"type":"string","enum":["buy","sell"],"title":"OrderSide","description":"Order side enumeration."},"OrderType":{"type":"string","enum":["MKT","LMT"],"title":"OrderType","description":"Order type enumeration."},"SimulationMetrics":{"properties":{"total_orders":{"type":"integer","minimum":0.0,"title":"Total Orders","description":"Total number of orders submitted"},"executed_orders":{"type":"integer","minimum":0.0,"title":"Executed Orders","description":"Number of orders that were successfully executed"},"win_rate":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Win Rate","description":"Percentage of winning trades (0.0 to 1.0)"},"total_pnl":{"type":"number","title":"Total Pnl","description":"Total profit and loss across all trades"},"avg_trade_return":{"type":"number","title":"Avg Trade Return","description":"Average return per trade as a percentage"},"max_drawdown":{"type":"number","title":"Max Drawdown","description":"Maximum drawdown as a percentage (negative value)"},"execution_rate":{"type":"number","title":"Execution Rate","description":"Calculate the execution rate (executed orders / total orders).","readOnly":true},"loss_rate":{"type":"number","title":"Loss Rate","description":"Calculate the loss rate (1 - win_rate).","readOnly":true}},"type":"object","required":["total_orders","executed_orders","win_rate","total_pnl","avg_trade_return","max_drawdown","execution_rate","loss_rate"],"title":"SimulationMetrics","description":"Performance metrics for the simulation."},"SimulationRequest":{"properties":{"symbol":{"type":"string","maxLength":20,"minLength":1,"title":"Symbol","description":"Trading symbol (e.g., AAPL, MSFT)"},"timeframe":{"$ref":"#/components/schemas/Timeframe","description":"Candle timeframe for simulation"},"start":{"type":"string","format":"date-time","title":"Start","description":"Start time for the simulation window (ISO 8601)"},"end":{"type":"string","format":"date-time","title":"End","description":"End time for the simulation window (ISO 8601)"},"orders":{"items":{"$ref":"#/components/schemas/Order"},"type":"array","minItems":1,"title":"Orders","description":"List of orders to simulate"}},"type":"object","required":["symbol","timeframe","start","end","orders"],"title":"SimulationRequest","description":"Request model for the trading simulation endpoint."},"SimulationResponse":{"properties":{"symbol":{"type":"string","title":"Symbol","description":"Trading symbol that was simulated"},"timeframe":{"$ref":"#/components/schemas/Timeframe","description":"Timeframe used for the simulation"},"start":{"type":"string","format":"date-time","title":"Start","description":"Start time of the simulation window"},"end":{"type":"string","format":"date-time","title":"End","description":"End time of the simulation window"},"metrics":{"$ref":"#/components/schemas/SimulationMetrics","description":"Performance metrics for the simulation"},"trades":{"items":{"$ref":"#/components/schemas/Trade"},"type":"array","title":"Trades","description":"List of executed trades with their results"},"simulation_duration_days":{"type":"number","title":"Simulation Duration Days","description":"Calculate the simulation duration in days.","readOnly":true},"trades_per_day":{"type":"number","title":"Trades Per Day","description":"Calculate the average number of trades per day.","readOnly":true}},"type":"object","required":["symbol","timeframe","start","end","metrics","trades","simulation_duration_days","trades_per_day"],"title":"SimulationResponse","description":"Complete response model for the trading simulation."},"Timeframe":{"type":"string","enum":["1m","5m","15m","30m","1h","2h","4h","1d"],"title":"Timeframe","description":"Supported timeframes for simulation."},"Trade":{"properties":{"entry_time":{"type":"string","format":"date-time","title":"Entry Time","description":"Timestamp when the trade was entered"},"exit_time":{"type":"string","format":"date-time","title":"Exit Time","description":"Timestamp when the trade was exited"},"entry_price":{"type":"number","exclusiveMinimum":0.0,"title":"Entry Price","description":"Price at which the trade was entered"},"exit_price":{"type":"number","exclusiveMinimum":0.0,"title":"Exit Price","description":"Price at which the trade was exited"},"side":{"$ref":"#/components/schemas/OrderSide","description":"Trade side: buy or sell"},"result":{"$ref":"#/components/schemas/TradeResult","description":"Trade exit reason: tp (take profit), sl (stop loss), or timeout"},"pnl":{"type":"number","title":"Pnl","description":"Profit and loss for this trade"},"holding_minutes":{"type":"integer","minimum":0.0,"title":"Holding Minutes","description":"Duration the position was held in minutes"},"return_percentage":{"type":"number","title":"Return Percentage","description":"Calculate the return percentage for this trade.","readOnly":true},"is_winning_trade":{"type":"boolean","title":"Is Winning Trade","description":"Determine if this is a winning trade.","readOnly":true}},"type":"object","required":["entry_time","exit_time","entry_price","exit_price","side","result","pnl","holding_minutes","return_percentage","is_winning_trade"],"title":"Trade","description":"Individual trade result model."},"TradeResult":{"type":"string","enum":["tp","sl","timeout"],"title":"TradeResult","description":"Trade result enumeration."}}}}}